---
title: "Presentation Ninja"
subtitle: "⚔<br/>with xaringan"
author: "Yihui Xie"
institute: "RStudio, PBC"
translators: "Silvia Canelón, Alejandra Hernandez Segura, Rocío Joo"
date: "2016/12/12 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

background-image: url(https://upload.wikimedia.org/wikipedia/commons/b/be/Sharingan_triple.svg)

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

???

Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Sharingan_triple.svg)

---
class: center, middle

# xaringan

### /ʃaː.'riŋ.ɡan/

---
class: inverse, center, middle

# Empezar

---

# Hola Mundo

Instala el paquete **xaringan** de [Github](https://github.com/yihui/xaringan):

```{r eval=FALSE, tidy=FALSE}
remotes::install_github("yihui/xaringan")
```

--

Se recomienda utilizar el ambiente de desarrollo (o IDE, por su sigla en inglés: Integrated Development Environment) de [RStudio](https://www.rstudio.com/products/rstudio/), pero no es necesario.

- Crea un nuevo documento de R Markdown desde el menu `File -> New File -> R Markdown -> From Template -> Ninja Presentation`;<sup>1</sup>

--

- Haga clic en el botón `Knit` para compilarlo;

--

- o utiliza el [Addin de RStudio](https://rstudio.github.io/rstudioaddins/)<sup>2</sup> "Infinite Moon Reader" para obtener una vista previa de las diapositivas (cada vez que actualizas y guardas en documento Rmd, las diapositivas serán automaticamente recargadas en el panel RStudio Viewer).

.footnote[
[1] 中文用户请看[这份教程](https://slides.yihui.org/xaringan/zh-CN.html). Usuarios hispanohablantes, por favor vean [este tutorial](https://slides.yihui.org/xaringan/ES.html)

[2] Vean [#2](https://github.com/yihui/xaringan/issues/2) si no ven la plantilla o el "addin" en RStudio.
]

---
background-image: url(`r xaringan:::karl`)
background-position: 50% 50%
class: center, bottom, inverse

# ¡Solo se vive una vez!

---

# Hola Ninja

Como un ninja de presentación, seguramente no deberías quedar satisfecho/a con el ejemplo de "Hola Mundo." Necesitas entender más sobre dos cosas:

1. La librería [remark.js](https://remarkjs.com);

1. El paquete **xaringan**;

Basicamente **xaringan** inyectó el chakra de R Markdown (menos Pandoc) a **remark.js**. Las diapositivas son procesadas por remark.js en el navegador web y la fuente de Markdown que necesita remark.js se genera a través de R Markdown (**knitr**).

---

# remark.js

Puede ver una introducción de remark.js en su [página de inicio](https://remarkjs.com). Debería leer el [remark.js Wiki](https://github.com/gnab/remark/wiki) al menos una vez para saber como

- crear una nueva diapositiva (sintaxis de Markdown<sup>*</sup> y propiedades de la diapositiva);

- formatear una diapositiva (p.ej. alineamiento de texto);

- configurar la presentación;

- y usar la presentación (atajos de teclado).

Es importante estar familiarizado/a con remark.js antes de poder entender las opciones en **xaringan**.

.footnote[[*] ¡Es diferente con Markdown de Pandoc! Es limitado pero debería ser suficiente para fines de presentaciones. Vamos... ¡No necesita una diapositiva para la Tabla de Contenidos! Bueno, el apoyo de Markdown en remark.js [puede mejorarse](https://github.com/gnab/remark/issues/142) en el futuro.]

---
background-image: url(`r xaringan:::karl`)
background-size: cover
class: center, bottom, inverse

# ¡Estaba tan feliz de haber descubierto remark.js!

---
class: inverse, middle, center

# Usando xaringan

---

# xaringan

Proporciona un formato de salida `xaringan::moon_reader` como envoltorio para remark.js, y puede usarlo en los metadatos YAML, p.ej.

```yaml
---
title: "Una Presentación Genial"
output:
  xaringan::moon_reader:
    yolo: true
    nature:
      autoplay: 30000
---
```

Consulte la página de ayuda `?xaringan::moon_reader` para conocer todas las opciones posibles que puede usar.

---

# remark.js vs xaringan

Algunas diferencias entre usar remark.js (izquerda) y usando **xaringan** (derecha):

.pull-left[
1. Comience con un archivo HTML estándar;

1. Markdown sencillo;

1. Escribe JavaScript para reproducir automáticamente las diapositivas;

1. Configue manualmente MathJax;

1. Resalte el código con `*`;

1. Edite la fuente de Markdown y actualice el navegador web para ver las diapositivas actualizadas;
]

.pull-right[
1. Comience con un documento R Markdown;

1. R Markdown (puede incrustar R/otros bloques de código)

1. Proporcione una opción `autoplay`;

1. MathJax simplemente funciona;<sup>*</sup>

1. Resalte el código con `{{}}`;

1. El "addin" "Infinite Moon Reader" de RStudio actualiza las diapositivas con cada cambio;
]

.footnote[[*] En realidad, no. Consulte la siguiente página.]

---

# Math Expressions

You can write LaTeX math expressions inside a pair of dollar signs, e.g. &#36;\alpha+\beta$ renders $\alpha+\beta$. You can use the display style with double dollar signs:

```
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$

Limitations:

1. The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

1. There should not be spaces after the opening `$` or before the closing `$`.

1. Math does not work on the title slide (see [#61](https://github.com/yihui/xaringan/issues/61) for a workaround).

---

# R Code

```{r comment='#'}
# a boring regression
fit = lm(dist ~ 1 + speed, data = cars)
coef(summary(fit))
dojutsu = c('地爆天星', '天照', '加具土命', '神威', '須佐能乎', '無限月読')
grep('天', dojutsu, value = TRUE)
```

---

# R Plots

```{r cars, fig.height=4, dev='svg'}
par(mar = c(4, 4, 1, .1))
plot(cars, pch = 19, col = 'darkgray', las = 1)
abline(fit, lwd = 2)
```

---

# Tablas

Si quiere generar una tabla, asegúrese de que esté en formato HTML (en vez de Markdown u otro formato), p.ej.

```{r}
knitr::kable(head(iris), format = 'html')
```

---

# HTML Widgets

I have not thoroughly tested HTML widgets against **xaringan**. Some may work well, and some may not. It is a little tricky.

Similarly, the Shiny mode (`runtime: shiny`) does not work. I might get these issues fixed in the future, but these are not of high priority to me. I never turn my presentation into a Shiny app. When I need to demonstrate more complicated examples, I just launch them separately. It is convenient to share slides with other people when they are plain HTML/JS applications.

See the next page for two HTML widgets.

---

```{r out.width='100%', fig.height=6, eval=require('leaflet')}
library(leaflet)
leaflet() %>% addTiles() %>% setView(-93.65, 42.0285, zoom = 17)
```

---

```{r eval=require('DT'), tidy=FALSE}
DT::datatable(
  head(iris, 10),
  fillContainer = FALSE, options = list(pageLength = 8)
)
```

---

# Some Tips

- Do not forget to try the `yolo` option of `xaringan::moon_reader`.

    ```yaml
    output:
      xaringan::moon_reader:
        yolo: true
    ```

---

# Some Tips

- Slides can be automatically played if you set the `autoplay` option under `nature`, e.g. go to the next slide every 30 seconds in a lightning talk:

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          autoplay: 30000
    ```

- If you want to restart the play after it reaches the last slide, you may set the sub-option `loop` to TRUE, e.g.,

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          autoplay:
            interval: 30000
            loop: true
    ```

---

# Some Tips

- A countdown timer can be added to every page of the slides using the `countdown` option under `nature`, e.g. if you want to spend one minute on every page when you give the talk, you can set:

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          countdown: 60000
    ```

    Then you will see a timer counting down from `01:00`, to `00:59`, `00:58`, ... When the time is out, the timer will continue but the time turns red.
    
---

# Algunos consejos

- La diapositiva titular es creada automaticamente por **xaringan**, pero es simplemente otra diapositiva remark.js que se agrega antes de las otras diapositivas. 

    La diapositiva titular se establece en `class: center, middle, inverse, title-slide` de manera predeterminada. Puede cambiar las clases de la diapositiva titular con la opción `titleSlideClass` de `nature` (`title-slide` siempre se aplica).

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          titleSlideClass: [top, left, inverse]
    ```
    
--

- Si quiere crear su propia diapositiva titular, desactiva la diapositiva titular de **xaringan** con la opción `seal = FALSE` de `moon_reader`.

    ```yaml
    output:
      xaringan::moon_reader:
        seal: false
    ```

---

# Algunos consejos

- Existen varias maneras de construir diapositivas incrementales. Consulte [esta presentación](https://slides.yihui.org/xaringan/incremental.html) para ver ejemplos.

- La opción `highlightLines: true` de `nature` resaltará las líneas de código que comienzan con `*`, o que están envueltas en `{{ }}`, o tienen comentarios **_"trailing"_** `#<<`;

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          highlightLines: true
    ```

    Vea ejemplos en la página siguiente.

---

# Algunos consejos


.pull-left[
Un ejemplo usando un `*` inicial:

    ```r
    if (TRUE) {
    ** message("¡Muy importante!")
    }
    ```
Salida:
```r
if (TRUE) {
* message("¡Muy importante!")
}
```

Este es un código R inválido, por lo tanto es un bloque sencillo de código delimitado que no se ejecuta.
]

.pull-right[
Un ejemplo usando `{{}}`:

````
`r ''````{r tidy=FALSE}
if (TRUE) {
*{{ message("¡Muy importante!") }}
}
```
````
Salida:
```{r tidy=FALSE}
if (TRUE) {
{{ message("¡Muy importante!") }}
}
```

Este es un código R válido asi que lo puede ejecutar. Tenga en cuenta que `{{}}` puede envolver una expresión de R de varias líneas.
]

---

# Algunos consejos

Un ejemplo de usar el comentario **_trailing_** `#<<` para resaltar líneas:

````markdown
`r ''````{r tidy=FALSE}
library(ggplot2)
ggplot(mtcars) + 
  aes(mpg, disp) + 
  geom_point() +   #<<
  geom_smooth()    #<<
```
````

Salida:

```{r tidy=FALSE, eval=FALSE}
library(ggplot2)
ggplot(mtcars) + 
  aes(mpg, disp) + 
  geom_point() +   #<<
  geom_smooth()    #<<
```

---

# Algunos consejos

Cuando habilite "line-highlighting," tambien puede usar la opción de bloque `highlight.output` para resaltar líneas específicas de la salida de texto de un bloque de código. Por ejemplo, `highlight.output = TRUE` significa resaltar todas las líneas, and `highlight.output = c(1,3)` significa resaltar la primera y la tercera línea.

````md
`r ''````{r, highlight.output=c(1, 3)}
head(iris)
```
````

```{r, highlight.output=c(1, 3), echo=FALSE}
head(iris)
```

Pregunta: ¿qué significa `highlight.output = c(TRUE, FALSE)? (Sugerencia: piensa en el reciclaje de los vectores en R)

---

# Some Tips

- To make slides work offline, you need to download a copy of remark.js in advance, because **xaringan** uses the online version by default (see the help page `?xaringan::moon_reader`).

- You can use `xaringan::summon_remark()` to download the latest or a specified version of remark.js. By default, it is downloaded to `libs/remark-latest.min.js`.

- Then change the `chakra` option in YAML to point to this file, e.g.

    ```yaml
    output:
      xaringan::moon_reader:
        chakra: libs/remark-latest.min.js
    ```

- If you used Google fonts in slides (the default theme uses _Yanone Kaffeesatz_, _Droid Serif_, and _Source Code Pro_), they won't work offline unless you download or install them locally. The Heroku app [google-webfonts-helper](https://google-webfonts-helper.herokuapp.com/fonts) can help you download fonts and generate the necessary CSS.

---

# Macros

- remark.js [allows users to define custom macros](https://github.com/yihui/xaringan/issues/80) (JS functions) that can be applied to Markdown text using the syntax `![:macroName arg1, arg2, ...]` or `![:macroName arg1, arg2, ...](this)`. For example, before remark.js initializes the slides, you can define a macro named `scale`:

    ```js
    remark.macros.scale = function (percentage) {
      var url = this;
      return '<img src="' + url + '" style="width: ' + percentage + '" />';
    };
    ```

    Then the Markdown text

    ```markdown
    ![:scale 50%](image.jpg)
    ```

    will be translated to
    
    ```html
    <img src="image.jpg" style="width: 50%" />
    ```

---

# Macros (continued)

- To insert macros in **xaringan** slides, you can use the option `beforeInit` under the option `nature`, e.g.,

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          beforeInit: "macros.js"
    ```

    You save your remark.js macros in the file `macros.js`.

- The `beforeInit` option can be used to insert arbitrary JS code before `remark.create()`. Inserting macros is just one of its possible applications.

---

# CSS

Among all options in `xaringan::moon_reader`, the most challenging but perhaps also the most rewarding one is `css`, because it allows you to customize the appearance of your slides using any CSS rules or hacks you know.

You can see the default CSS file [here](https://github.com/yihui/xaringan/blob/master/inst/rmarkdown/templates/xaringan/resources/default.css). You can completely replace it with your own CSS files, or define new rules to override the default. See the help page `?xaringan::moon_reader` for more information.

---

# CSS

For example, suppose you want to change the font for code from the default "Source Code Pro" to "Ubuntu Mono". You can create a CSS file named, say, `ubuntu-mono.css`:

```css
@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

.remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
```

Then set the `css` option in the YAML metadata:

```yaml
output:
  xaringan::moon_reader:
    css: ["default", "ubuntu-mono.css"]
```

Here I assume `ubuntu-mono.css` is under the same directory as your Rmd.

See [yihui/xaringan#83](https://github.com/yihui/xaringan/issues/83) for an example of using the [Fira Code](https://github.com/tonsky/FiraCode) font, which supports ligatures in program code.

---

# Themes

Don't want to learn CSS? Okay, you can use some user-contributed themes. A theme typically consists of two CSS files `foo.css` and `foo-fonts.css`, where `foo` is the theme name. Below are some existing themes:

```{r, R.options=list(width = 70)}
names(xaringan:::list_css())
```

---

# Themes

To use a theme, you can specify the `css` option as an array of CSS filenames (without the `.css` extensions), e.g.,

```yaml
output:
  xaringan::moon_reader:
    css: [default, metropolis, metropolis-fonts]
```

If you want to contribute a theme to **xaringan**, please read [this blog post](https://yihui.org/en/2017/10/xaringan-themes).

---
class: inverse, middle, center
background-image: url(https://upload.wikimedia.org/wikipedia/commons/3/39/Naruto_Shiki_Fujin.svg)
background-size: contain

# Naruto

---
background-image: url(https://upload.wikimedia.org/wikipedia/commons/b/be/Sharingan_triple.svg)
background-size: 100px
background-position: 90% 8%

# Sharingan

The R package name **xaringan** was derived<sup>1</sup> from **Sharingan**, a dōjutsu in the Japanese anime _Naruto_ with two abilities:

- the "Eye of Insight"

- the "Eye of Hypnotism"

I think a presentation is basically a way to communicate insights to the audience, and a great presentation may even "hypnotize" the audience.<sup>2,3</sup>

.footnote[
[1] In Chinese, the pronounciation of _X_ is _Sh_ /ʃ/ (as in _shrimp_). Now you should have a better idea of how to pronounce my last name _Xie_.

[2] By comparison, bad presentations only put the audience to sleep.

[3] Personally I find that setting background images for slides is a killer feature of remark.js. It is an effective way to bring visual impact into your presentations.
]

---

# Naruto terminology

The **xaringan** package borrowed a few terms from Naruto, such as

- [Sharingan](https://naruto.fandom.com/wiki/Sharingan) (写輪眼; the package name)

- The [moon reader](https://naruto.fandom.com/wiki/Moon_Reader) (月読; an attractive R Markdown output format)

- [Chakra](https://naruto.fandom.com/wiki/Chakra) (查克拉; the path to the remark.js library, which is the power to drive the presentation)

- [Nature transformation](https://naruto.fandom.com/wiki/Nature_Transformation) (性質変化; transform the chakra by setting different options)

- The [infinite moon reader](https://naruto.fandom.com/wiki/Infinite_Tsukuyomi) (無限月読; start a local web server to continuously serve your slides)

- The [summoning technique](https://naruto.fandom.com/wiki/Summoning_Technique) (download remark.js from the web)

You can click the links to know more about them if you want. The jutsu "Moon Reader" may seem a little evil, but that does not mean your slides are evil.

---

class: center

# Hand seals (印)

Press `h` or `?` to see the possible ninjutsu you can use in remark.js.

![](https://upload.wikimedia.org/wikipedia/commons/7/7e/Mudra-Naruto-KageBunshin.svg)

---

class: center, middle

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](https://yihui.org/knitr/), and [R Markdown](https://rmarkdown.rstudio.com).
